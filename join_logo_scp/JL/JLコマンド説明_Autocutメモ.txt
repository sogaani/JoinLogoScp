-----------------------------------------
join_logo_scp用の実行内容スクリプト
コマンド説明（Auto系コマンド） ver2.1対応
-----------------------------------------

推測した番組構成情報を元にカット位置変更を加えるAuto系コマンドの説明。
（オプションを忘れないようにメモ書き）

全般で使用するオプションは、
・-F,-FR,-Fhead,-Ftail,-Fmid はどのAutoコマンドでも従来コマンド同様に使用可能。
・それ以外のオプションはAutoEdgeコマンドのみ使用可能（従来のロゴ位置で判断実行）


●AutoCut TR/EC -code 数値 -limit 数値 その他オプション

指定した構成数以降はカットする。
TR指定で予告と15秒以上構成のカット位置を最初に決め、番組提供・エンドカードを
AutoAddコマンドで設定し、EC指定で15秒未満で残った所のカット位置を決めること想定。

・TR指定時（予告位置設定および15秒単位のロゴ付き番宣部分をカット指定）
  予告位置を認識し、以降をロゴ付き番宣部分カット開始位置として指定（-code 0 でコマンド無効）
  -code 数値
    検索開始位置
      0:カットしない
      1:CM明けから数える
      2:CM明け（自動判定で場合によりCM直前指定秒以内）から数える
      3:CM直前の指定秒以内に開始する構成から数える
      4:CM直前の5秒単位構成指定秒以内から数える
      5:CM直前の15秒単位構成指定秒以内から数える
    カット開始条件
      通常:15秒単位の構成
      +10:15秒以上の構成
      +20:構成に制限なし
    CM明け直前のロゴなし予告化
      通常:ロゴありのみ
      +100:ロゴ手前の15秒単位ではない位置も番組提供でないと判断したら候補として追加
  -limit 数値
    検索開始位置から予告として残す構成数
  -trscope 秒数
    CM直前から検索する場合のCM前上限秒数を指定（30秒から変更する場合のみ）
  -trsumprd 秒数
    予告期間の合計最低秒数を必要なら指定（-limitと両方条件を満たすまで残す）
  -tr1stprd 秒数
    検索開始位置となる構成の最大秒数を指定（指定秒数以下の構成が現れるまで予告にしない）
    省略時、0指定時は無効
  -autoeach
    各ロゴそれぞれ１話分として個別に検出する場合に指定(ver2.1追加)

・EC（15秒未満のエンドカードとロゴ付き番組宣伝を分離してカット指定）
  TR指定によるカット手前の15秒未満で残っている部分のカット開始位置指定（-code 0 でコマンド無効）

   ・区間最後からのカットは、指定位置が既存の番組提供・エンドカード設定でも無視してカットする
   ・区間先頭からのカットは、既存の番組提供・エンドカード設定を残す

  -code 数値
    検索する構成期間
      0:カットしない
      1:予告・番組提供として残している位置後で最初のロゴ付き15秒未満
      2:構成期間を5秒に限定（-periodで秒数指定）
      3:構成期間を5秒以下に限定（-periodで上限指定）
      4:構成期間を5-14秒に限定（-periodで下限指定）
      5:構成期間を5-14秒に限定（-periodで下限、-maxprdで上限指定）
    追加条件
      +10  最後の１構成を強制的にカット
      +20  最後の１構成がperiod秒だった時は強制的にカット
      +100 番組提供・既存エンドカードより前の位置で設定も許可
  -limit 数値
    検索開始位置から残す構成数
    マイナスの場合は最後の位置から検索（最後の1つをカットする場合は-1）
  -period 秒数
    構成期間指定時の条件秒数を指定（5秒から変更する場合のみ）
  -maxprd 秒数
    構成期間指定時の条件秒数を指定（上下限指定時の上限14秒から変更する場合のみ）


●AutoAdd SP/EC/TR -code 数値 -limit 数値 その他オプション

指定した条件を満たす構成を配置情報として追加する。
配置情報は最初の引数で指定し「SP=番組提供、EC=エンドカード、TR=予告」を想定。

・SP指定時
  ロゴ有無に関わらず番組提供部分を認識して残す（-code 0 でコマンド無効）
  -code 数値
    構成期間
      0:実行しない
      1:構成期間6-14秒
      2:構成期間を5秒に限定（-periodで秒数指定）
      4:構成期間5-14秒に限定（-periodで下限指定）
      5:構成期間5-14秒に限定（-periodで下限、-maxprdで上限指定）
      6:構成期間を15秒に限定
    検索範囲
      10:予告（なければロゴ）隣接のみ検索（下2桁目=0も同じ）
      20:予告（なければロゴ）から90秒以内まで検索（予告時手前側は隣接のみ）
      30:予告（なければロゴ）から90秒の所を検索
      40:ロゴ隣接のみ検索
      50:ロゴから90秒以内まで検索
      60:ロゴから90秒の所を検索
      （90秒の所は-scopeで秒数変更可）
    追加条件
      +100:ロゴなしのみ検索
      +200:ロゴ付きのみ検索
      +400:AutoCutコマンドによるカット以降も検索
      +1000:予告前側（なければロゴ開始側）は候補から外す
      +2000:予告後側（なければロゴ終了側）は候補から外す
      +4000:予告と認識した最初の内容を番組提供部分とする
           （予告認識は１つ後にずらす）
      +5000:予告と認識した最初の内容を番組提供部分とする
           （予告認識が後ろにずらせなくても強制設定）
      +20000:既存予告が-trsumprdで指定の秒数以上あれば無効とする
      +100000:CM分割構成検出（例：5秒+10秒を15秒CM構成）によるCM扱いを無効として検索(ver2.1追加)
  -limit 数値
    対象配置情報の最大データ数（0または指定なしの時は最大データ数に制限なし）
    1以上の値を設定した時、上限以上存在しなければ１つだけ追加する
    （2以上の値で複数設定する場合は複数回コマンドが必要）
  -scope 秒数
    検索範囲を指定した時の探索秒数を指定（90秒から変更する場合のみ）
  -scopen 秒数
    検索範囲を指定した時の探索秒数の開始側を指定（指定ない時は0秒）
  -period 秒数
    構成期間指定時の条件秒数を指定（5秒から変更する場合のみ）
  -maxprd 秒数
    構成期間指定時の条件秒数を指定（上下限指定時の上限14秒から変更する場合のみ）
  -secnext 秒数
    次の構成を秒数指定で限定する（0の時指定しない）
  -secprev 秒数
    前の構成を秒数指定で限定する（0の時指定しない）

・EC/TR指定時
  EC:ロゴ有無に関わらずエンドカード部分を認識して残す（-code 0 でコマンド無効）
  TR:ロゴ有無に関わらず予告部分を認識して残す（-code 0 でコマンド無効）
  ECとTRの違いは-limitオプションでの配置情報の違い。AutoCutコマンドと配置情報を共有。
  -codeの値
    構成期間
      0:実行しない
      1:構成期間14秒以下
      2:構成期間を5秒に限定（-periodで秒数指定）
      3:構成期間を5秒以下に限定（-periodで上限指定）
      4:構成期間5-14秒に限定（-periodで下限指定）
      5:構成期間5-14秒に限定（-periodで下限、-maxprdで上限指定）
    検索範囲
      10:予告・番組提供（なければロゴ）隣接のみ検索（下2桁目=0も同じ）
      20:予告・番組提供（なければロゴ）から90秒以内まで検索（予告時手前側は隣接のみ）
      30:予告・番組提供（なければロゴ）から90秒の所を検索
      40:ロゴ隣接のみ検索
      50:ロゴから90秒以内まで検索
      60:ロゴから90秒の所を検索
      （90秒の所は-scopeで秒数変更可）
    追加条件
      +100:ロゴなしのみ検索
      +200:ロゴ付きのみ検索
      +300:両隣も含めロゴなしのみ検索
      +400:AutoCutコマンドによるカット以降も検索
      +1000:予告前側（なければロゴ開始側）は候補から外す
      +2000:予告後側（なければロゴ終了側）は候補から外す
      +3000:予告と番組提供の間以外は候補から外す
      +4000:直後が番組提供・エンドカード時のみ候補とする(ver2.1追加)
      +10000:構成期間14秒以下で候補となる位置限定で指定された構成期間でも満たす場合のみ
             （例えば構成期間5秒以下にした場合、隣接が10秒ならその後5秒構成あっても無視）
      +20000:既存予告が-trsumprdで指定の秒数以上あれば無効とする
      +100000:CM分割構成検出（例：ロゴなし5秒+10秒を15秒CM構成）によるCM扱いを強制無効化(ver2.1追加)
      +200000:CM分割構成検出（例：ロゴなし5秒+10秒を15秒CM構成）によるCM扱いを強制有効化(ver2.1追加)
  -limit 数値
    対象配置情報の最大データ数（0または指定なしの時は最大データ数に制限なし）
    1以上の値を設定した時、上限以上存在しなければ１つだけ追加する
    （2以上の値で複数設定する場合は複数回コマンドが必要）
  -scope 秒数
    検索範囲を指定した時の探索秒数を指定（90秒から変更する場合のみ）
  -scopen 秒数
    検索範囲を指定した時の探索秒数の開始側を指定（指定ない時は0秒）
  -period 秒数
    構成期間指定時の条件秒数を指定（5秒から変更する場合のみ）
  -maxprd 秒数
    構成期間指定時の条件秒数を指定（上下限指定時の上限14秒から変更する場合のみ）
  -trsumprd 秒数
    既存予告秒数で実行を限定する場合の指定秒数
  -secnext 秒数
    次の構成を秒数指定で限定する（0の時指定しない）
  -secprev 秒数
    前の構成を秒数指定で限定する（0の時指定しない）


●AutoEdge S/E/B -code 数値
指定ロゴの最初(S)/最後(E)/両方(B)部分のカット・追加
  -codeの値
    検索範囲 1:構成期間3-10秒
             2:構成期間5秒に限定（-periodで秒数変更可）
             3:構成期間3-5秒に限定（-periodで上限秒数変更可）
             4:構成期間5-10秒に限定（-periodで下限秒数変更可）
             5:構成期間5-10秒に限定（-periodで下限、-maxprdで上限指定）
    追加条件 +10:既存カット適用後の位置を基準（+00も同じ）
             +20:ロゴ切り替わり位置を基準
             +30:ロゴ切り替わり位置を基準で既存カット上書き許可
             +000:ロゴ部分のカットを指定（通常のロゴエッジカット）
             +100:ロゴなし部分のカットを指定（CM側を明示的にカット）
             +200:ロゴ部分を残す指定（ロゴエッジを明示的に残す）
             +300:ロゴなし部分を残す指定（CM側を残す）
             +1000:１構成だけではなく条件を満たす全構成で実施

-scope
  ロゴ位置からの既存カットが指定秒数以内の時有効（90秒から変更する場合のみ）(ver2.1変更)
-period
  期間の条件秒数を指定（5秒から変更する場合のみ）
-maxprd 秒数
  構成期間指定時の条件秒数を指定（上下限指定時の上限10秒から変更する場合のみ）


●AutoCM B -code 数値
ロゴなしだった場合のみ動作し、15秒単位構成のCM位置を検出(ver2.1追加)
  -codeの値
    動作条件 0:実行しない
             1-10:CM検出（数値が大きいほど微妙な判断をCMにする）
  -scope 秒数
    最後から指定秒以降の位置を含む短時間構成は手前がCM扱いならCM継続

  -scopex 秒数
    最後から指定秒以降に含まれる60/90/120秒構成はCM扱いにする

  -maxprd 秒数
    指定秒を超える構成は15秒単位でもCM扱いにしない


●AutoUp B -code 数値
従来方法で確定後、推測番組構成のロゴ有無判断に反映させる(ver2.1追加)
従来方法でカット位置を決めた後、予告等の検出をする場合に使用。
  -codeの値
    動作条件 0:実行しない
             1:推測構成はそのまま使いロゴ有無のみ反映
             2:ロゴに合わせて推測構成を変更

●SetParam 変数名 設定値
  内部保持している設定を変更する。

  変数名       設定値
  CutTR        予告終了後のロゴ付き15秒単位構成（0:残す 1:カット）
               予告終了後に15秒単位ロゴつき番宣なければ0設定で誤カットをなくす
  CutSP        番組提供（0:残す 1:カット）
  AddLogo      ロゴあり通常構成（0:制御なし 1:残す）
               Autoコマンドを予告等検出のみに使う（他は従来コマンド）場合は0設定
  AddUC        ロゴなし不明構成（0:制御なし 1:残す）
               先頭最後を除くロゴなし＆15秒単位CMではない＆Autoコマンド設定なし
               不明確な所はできるだけ残す方針の場合は1設定
  WLogoTRMax   予告番宣部分と認識する最大のロゴ期間フレーム数
               （ロゴ期間が設定値を超える場合は本編期間として扱う）
  WCompTRMax   予告番宣部分と認識する１構成あたりの最大期間フレーム数
               （認識した１構成の期間が設定値を超える場合は本編期間として扱う）
  WCompLast    最後までロゴが続く場合のロゴ位置補正する最大構成期間
               （最後の構成がロゴありだった場合、指定以下構成ならロゴなしとして扱う）
  WLogoSftMrg  ロゴ期間が通常より少し短い場合に延長補正する最大フレーム数
  WCompSpMin   番組提供と認識する最小秒数の標準設定。
               番組提供認識コマンド以外の内部処理用として使用。
  WCompSpMax   番組提供と認識する最大秒数の標準設定
               番組提供認識コマンド以外の内部処理用として使用。
  WLogoSumMin  ロゴ期間合計が指定フレーム数より短い場合はロゴなしとする(ver2.1追加)


